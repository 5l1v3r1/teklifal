<%= form_with(model: announcement, local: true) do |form| %>
  <div class="row">
    <div class="col-8 offset-2">
      <%= render 'form_errors', object: announcement %>

      <div class="form-group">
        <%= form.label :title %>
        <%= form.text_field :title, class: 'form-control' %>
      </div>

      <div class="form-group">
        <%= form.label :desc %>
        <%= form.trix_editor :desc %>
      </div>

      <%= render 'attachment_form_field', form: form %>

      <% if current_user && current_user.manager? %>
        <div class="form-group">
          <%= form.label :supervisor_id %>
          <%= form.select :supervisor_id,
            User.where(role: :moderator).collect { |user| [user.name, user.id] },
            {include_blank: true}, {class: "form-control"} %>
        </div>
      <% end %>

      <div class="form-group">
        <%= form.label :duration_day %>
        <% if form.object.persisted? and form.object.published? %>
          <%= form.text_field :duration_day, class: "form-control", readonly: true  %>
        <% else %>
          <%= form.select :duration_day, form.object.class::DURATION_DAYS.collect { |d| ["#{d} gÃ¼n", d] },
                {}, class: 'form-control' %>

        <% end %>
      </div>


    </div>
  </div>


  <div class="mt-3 border-top row pt-3">
    <div class="col-8 offset-2">
      <%= form.submit nil, class: "btn btn-success" %>
    </div>
  </div>
<% end %>